<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>phbricator的安装 | zhuxin_blog</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="Phabricator
Phabricator是一个开发软件工具的集成，包含任务管理，代码review，管理git,svn等等,持续集成的构建，内部通道的讨论等等。

在我们局域网内安装phabricator
Phabricator是一个LAMP应用程序，所以:

一台linux或Mac OS电脑。(ps: windows不行奥，因为一些命令行在windows无法执行。。。)
一个域名(可有可无，">
<meta property="og:type" content="article">
<meta property="og:title" content="phbricator的安装">
<meta property="og:url" content="http://yoursite.com/2016/11/16/phabricator/install_phabricator/index.html">
<meta property="og:site_name" content="zhuxin_blog">
<meta property="og:description" content="Phabricator
Phabricator是一个开发软件工具的集成，包含任务管理，代码review，管理git,svn等等,持续集成的构建，内部通道的讨论等等。

在我们局域网内安装phabricator
Phabricator是一个LAMP应用程序，所以:

一台linux或Mac OS电脑。(ps: windows不行奥，因为一些命令行在windows无法执行。。。)
一个域名(可有可无，">
<meta property="og:updated_time" content="2016-11-21T15:43:01.066Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="phbricator的安装">
<meta name="twitter:description" content="Phabricator
Phabricator是一个开发软件工具的集成，包含任务管理，代码review，管理git,svn等等,持续集成的构建，内部通道的讨论等等。

在我们局域网内安装phabricator
Phabricator是一个LAMP应用程序，所以:

一台linux或Mac OS电脑。(ps: windows不行奥，因为一些命令行在windows无法执行。。。)
一个域名(可有可无，">
  
    <link rel="alternative" href="/atom.xml" title="zhuxin_blog" type="application/atom+xml">
  
  
    <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico">
  
  <link href="//fonts.googleapis.com/css?family=Inconsolata:400,700|Open+Sans:700,400" rel="stylesheet" type="text/css">
  <link rel="stylesheet" href="/css/style.css">
  

</head>
<body>
  <div id="container">
    <div id="wrap">
      <div id="header">
  <div id="header-outer" class="outer">
    <div id="header-inner" class="inner">
      <div id="header-title">
        <h1 id="logo-wrap">
          <a href="/" id="logo">
          
              <span id="subtitle">每天进步一点点</span>
          
          </a>
        </h1>
      </div>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">首页</a>
        
          <a class="main-nav-link" href="/archives">我的文章</a>
        
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" results="0" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://yoursite.com"></form>
      </div>
    </div>
  </div>
</div>
      <div class="outer">
        <section id="main"><article id="post-phabricator/install_phabricator" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2016/11/16/phabricator/install_phabricator/" class="article-date">
  <time datetime="2016-11-16T14:15:53.637Z" itemprop="datePublished">2016-11-16</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/development-tools/">development tools</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="article-title" itemprop="name">
      phbricator的安装
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h3 id="Phabricator"><a href="#Phabricator" class="headerlink" title="Phabricator"></a>Phabricator</h3><blockquote>
<p>Phabricator是一个开发软件工具的集成，包含任务管理，代码review，管理git,svn等等,持续集成的构建，<br>内部通道的讨论等等。</p>
</blockquote>
<h3 id="在我们局域网内安装phabricator"><a href="#在我们局域网内安装phabricator" class="headerlink" title="在我们局域网内安装phabricator"></a>在我们局域网内安装phabricator</h3><blockquote>
<p>Phabricator是一个LAMP应用程序，所以:</p>
<ul>
<li>一台linux或Mac OS电脑。(ps: windows不行奥，因为一些命令行在windows无法执行。。。)</li>
<li>一个域名(可有可无，在内网上访问就行了，除非你需要家里办公也访问)(格式:phabricator.xxxxx.com).</li>
<li>一些基本的系统管理员的技能(linux命令得熟悉啊！)</li>
<li>一个web容器，Apache或Nginx（常用的两种方式）</li>
<li>PHP(version: &gt;= 5.2, 版本7不支持), MySql(version: &gt;= 5.5), git.<br>系统管理员应该会的一些技能（也就是linux的一些指令）,比如：在操作系统安装软件，文件系统的操作，进程<br>的管理，权限的处理，修改配置文件，设置环境变量等等。</li>
</ul>
</blockquote>
<h3 id="安装需要的组件"><a href="#安装需要的组件" class="headerlink" title="安装需要的组件"></a>安装需要的组件</h3><blockquote>
<ul>
<li>git(在包管理系统中一般称为’git’)</li>
<li>Apache(一般称为”httpd”或”apache2”)或者nginx</li>
<li>MySQL Server(一般是”mysqlId”或”mysql-server”)</li>
<li>PHP(一般是”php”)</li>
<li>需要的PHP扩展，比如”php-mysql”, “php5-mysql”<br>如果已经安装好了这些，那么获取Phrbricator以及它的依赖:</li>
</ul>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">//选择你要安装的文件夹，并在该文件夹下执行以下命令</span><br><span class="line">git clone https://github.com/phacility/libphutil.git</span><br><span class="line">git clone https://github.com/phacility/arcanist.git</span><br><span class="line">git clone https://github.com/phacility/phabricator.git</span><br></pre></td></tr></table></figure>
<blockquote>
<p>APC是建议安装的，所以没有深究。</p>
</blockquote>
<h3 id="Apache容器的配置"><a href="#Apache容器的配置" class="headerlink" title="Apache容器的配置"></a>Apache容器的配置</h3><blockquote>
<ul>
<li>配置web容器(Apache, nginx)</li>
<li>在浏览器访问phabricator<br>Apache的httpd.conf</li>
</ul>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&lt;VirtualHost *&gt;</span><br><span class="line">  # Change this to the domain which points to your host.</span><br><span class="line">  ServerName phabricator.example.com</span><br><span class="line"></span><br><span class="line">  # Change this to the path where you put &apos;phabricator&apos; when you checked it</span><br><span class="line">  # out from GitHub when following the Installation Guide.</span><br><span class="line">  #</span><br><span class="line">  # Make sure you include &quot;/webroot&quot; at the end!</span><br><span class="line">  DocumentRoot /path/to/phabricator/webroot</span><br><span class="line">  RewriteEngine on</span><br><span class="line">  RewriteRule ^(.*)$          /index.php?__path__=$1  [B,L,QSA]</span><br><span class="line">&lt;/VirtualHost&gt;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>如果Apache的配置文件目录不是Phabricator的目录，那么你需要添加<code>&lt;Directory /&gt;</code>块，这个块<br>标示依赖于你的Apache的版本，通过运行<code>httpd -v</code>得到当前运行Apache的版本，如果版本号小于2.4,</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;Directory &quot;/path/to/phabricator/webroot&quot;&gt;</span><br><span class="line">  Order allow,deny</span><br><span class="line">  Allow from all</span><br><span class="line">&lt;/Directory&gt;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>如果大于2.4:</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;Directory &quot;/path/to/phabricator/webroot&quot;&gt;</span><br><span class="line">  Require all granted</span><br><span class="line">&lt;/Directory&gt;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>配置完成之后，请重启Apache，并继续接下来的配置.</p>
</blockquote>
<h3 id="Nginx的配置"><a href="#Nginx的配置" class="headerlink" title="Nginx的配置"></a>Nginx的配置</h3><blockquote>
<p>nginx.conf:</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">server &#123;</span><br><span class="line">  server_name phabricator.example.com;</span><br><span class="line">  #你的phabricator安装目录</span><br><span class="line">  root        /path/to/phabricator/webroot;</span><br><span class="line"></span><br><span class="line">  location / &#123;</span><br><span class="line">    index index.php;</span><br><span class="line">    rewrite ^/(.*)$ /index.php?__path__=/$1 last;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  location /index.php &#123;</span><br><span class="line">    fastcgi_pass   localhost:9000;</span><br><span class="line">    fastcgi_index   index.php;</span><br><span class="line"></span><br><span class="line">    #required if PHP was built with --enable-force-cgi-redirect</span><br><span class="line">    fastcgi_param  REDIRECT_STATUS    200;</span><br><span class="line"></span><br><span class="line">    #variables to make the $_SERVER populate in PHP</span><br><span class="line">    fastcgi_param  SCRIPT_FILENAME    $document_root$fastcgi_script_name;</span><br><span class="line">    fastcgi_param  QUERY_STRING       $query_string;</span><br><span class="line">    fastcgi_param  REQUEST_METHOD     $request_method;</span><br><span class="line">    fastcgi_param  CONTENT_TYPE       $content_type;</span><br><span class="line">    fastcgi_param  CONTENT_LENGTH     $content_length;</span><br><span class="line"></span><br><span class="line">    fastcgi_param  SCRIPT_NAME        $fastcgi_script_name;</span><br><span class="line"></span><br><span class="line">    fastcgi_param  GATEWAY_INTERFACE  CGI/1.1;</span><br><span class="line">    fastcgi_param  SERVER_SOFTWARE    nginx/$nginx_version;</span><br><span class="line"></span><br><span class="line">    fastcgi_param  REMOTE_ADDR        $remote_addr;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>配置完成之后重启nginx，并继续接下来的配置</p>
</blockquote>
<h3 id="配置Mysql"><a href="#配置Mysql" class="headerlink" title="配置Mysql"></a>配置Mysql</h3><blockquote>
<p>当MySQL运行时，需要加载Phabricator的schemata，所以要在phabricator目录下执行:<code>./bin/storage upgrade</code><br>如果你配置的用户不是连接数据库的特权用户，所以需要覆盖默认的用户，所以更改schema，通过一下命令更改<br><code>./bin/storage upgrade --user &lt;user&gt; --password &lt;password&gt;</code>并且<code>./bin/storage upgrade --force</code><br><strong>注意：</strong>当修改了phabricator后，运行<code>storage upgrade</code>来应用新的修改。</p>
</blockquote>
<h3 id="配置账号及注册"><a href="#配置账号及注册" class="headerlink" title="配置账号及注册"></a>配置账号及注册</h3><blockquote>
<p>phabricator提供了很多的登录体系，你可以配置谁可以访问或者注册你安装的phabricator以及用户用存在的账号登录phabricator。<br>登录方式称之为授权给予，比如可用的”用户名/密码”授权，允许你通过传统的用户名密码登录，其余的支持用证书登录。比如:</p>
<ul>
<li><strong>用户名密码：</strong>使用用户名密码登录注册</li>
<li><strong>LDAP：</strong>使用LDAP证书登录注册</li>
<li><strong>OAuth：</strong>用户使用支持OAuth2的协议登录，比如(Facebook,Google,GitHub)</li>
<li><strong>其余的提供程序：</strong>有许多可用的支持，Phabricator可以扩展，相关知识请自行了解。<br>默认情况下，没有可用的提供程序，你必须在安装完成之后使用”Auth”程序添加一种或多种提供程序。在你添加供应程序之后，<br>你可以使用存在的账号连接phabricator（比如你可以使用GitHub的OAuth账号登录Phabricator）或者用户使用它注册新的账<br>号（假设你启用这些选项）<br><strong>恢复管理员账号</strong>如果你意外的在phabrication中锁住了，你可以使用<code>bin/auth</code>脚本恢复管理员账号的访问，恢复访问，请使用:<br><code>./bin/auth recover &lt;username&gt;</code>,username是你想恢复的管理员的账号。<br><strong>通过web页面管理账号</strong>使用管理员账号登录phabricator并路由到<code>/people</code>,点击”People”,如果你是管理员，你可以看见创建<br>及修改账号的选项。<br><strong>手动的创建新账号</strong>，有两种手工创建账号的方式，一种是通过web网页另一种是通过命令行，<code>./bin/accountadamin</code>,一些选项<br>(如设置密码，更改账号标记)只能在命令行中可见。你可以使用此命令来使一个用户成为管理员（比如你意外的移除了你管理员的标记）<br>或者创建一个管理员账号。</li>
</ul>
</blockquote>
<h3 id="TODO-配置文件存储"><a href="#TODO-配置文件存储" class="headerlink" title="TODO(配置文件存储)"></a>TODO(配置文件存储)</h3><h3 id="TODO-配置邮件发送"><a href="#TODO-配置邮件发送" class="headerlink" title="TODO(配置邮件发送)"></a>TODO(配置邮件发送)</h3>
      
    </div>
   <!-- <footer class="article-footer">
      <a data-url="http://yoursite.com/2016/11/16/phabricator/install_phabricator/" data-id="ciw2bbtdm002fyco0buw82zuu" class="article-share-link">Share</a>
      
      
    </footer>-->
  </div>
  
    
<nav id="article-nav">
  
    <a href="/2016/11/17/vue/movitation_design/" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Newer</strong>
      <div class="article-nav-title">
        
          了解Vue
        
      </div>
    </a>
  
  
    <a href="/2016/11/16/react/internal_instance/" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Older</strong>
      <div class="article-nav-title">内部实例的伪实现（思考）</div>
    </a>
  
</nav>

  
</article>

</section>
        
          
            <aside id="sidebar">
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">分类</h3>
    <div class="widget">
      <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/Canvas/">Canvas</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Electron/">Electron</a><span class="category-list-count">10</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Git/">Git</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Http/">Http</a><span class="category-list-count">8</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/JS/">JS</a><span class="category-list-count">4</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/React/">React</a><span class="category-list-count">5</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/React-Native/">React Native</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/React-Redux/">React Redux</a><span class="category-list-count">5</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Vue/">Vue</a><span class="category-list-count">3</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Webpack/">Webpack</a><span class="category-list-count">17</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/development-tools/">development tools</a><span class="category-list-count">3</span></li></ul>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">近期文章</h3>
    <div class="widget recents">
      <ul>
        
          <li>
            <a href="/2016/11/29/vue/template_syntax/">Vue模板语法</a>
          </li>
        
          <li>
            <a href="/2016/11/28/vue/get_started/">Vue纵览</a>
          </li>
        
          <li>
            <a href="/2016/11/24/phabricator/what_is_docker/">docker</a>
          </li>
        
          <li>
            <a href="/2016/11/21/phabricator/eslint/">eslint</a>
          </li>
        
          <li>
            <a href="/2016/11/17/vue/movitation_design/">了解Vue</a>
          </li>
        
      </ul>
    </div>
  </div>

  
    
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">我的文章</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/11/">November 2016</a><span class="archive-list-count">16</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/10/">October 2016</a><span class="archive-list-count">8</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/07/">July 2016</a><span class="archive-list-count">17</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/06/">June 2016</a><span class="archive-list-count">15</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/05/">May 2016</a><span class="archive-list-count">2</span></li></ul>
    </div>
  </div>

  
</aside>
          
        
      </div>
      <!--<div id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      <a rel="license" href="http://creativecommons.org/licenses/by-nc/4.0/"><img alt="Creative Commons License" style="border-width:0" src="https://i.creativecommons.org/l/by-nc/4.0/88x31.png" /></a></br>
      &copy; 2016 zhuxin<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</div>-->
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">首页</a>
  
    <a href="/archives" class="mobile-nav-link">我的文章</a>
  
</nav>
    

<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
  <script src="/fancybox/jquery.fancybox.pack.js"></script>


<script src="/js/script.js"></script>

  </div>
</body>
</html>